{"ast":null,"code":"var _jsxFileName = \"/home/weverton/projetos/crud-react-final/crud-react2/src/pages/Detalhes/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport stylesTema from 'styles/Tema.module.scss';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Geral from './Geral';\nimport Endereco from './Endereco';\nimport PreLoader from 'components/PreLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Detalhes() {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const {\n    id\n  } = useParams();\n  const [usuario, setUsuario] = useState();\n  const navigate = useNavigate();\n\n  // remover o estado nomeCompleto\n  const [email, setEmail] = useState('');\n  const [username, setUsername] = useState('');\n  // remover o estado senha\n  const [telefone, setTelefone] = useState('');\n  const setarStatesUsuario = useCallback(() => {\n    setEmail(usuario !== null && usuario !== void 0 && usuario.email ? usuario.email : '');\n    setUsername(usuario !== null && usuario !== void 0 && usuario.username ? usuario.username : '');\n    // remover a linha que seta a senha\n    setTelefone(usuario !== null && usuario !== void 0 && usuario.phone ? usuario.phone : '');\n\n    // mudar o nomeComp para usar o username\n    let nomeComp = usuario === null || usuario === void 0 ? void 0 : usuario.username;\n    setUsername(nomeComp);\n  }, [usuario]);\n  useEffect(() => {\n    const getUser = async () => {\n      axios.get(`http://localhost:5000/users/${id}`).then(r => {\n        console.log(r);\n        setUsuario(r.data);\n        setLoading(false);\n      }).catch(e => console.log(e));\n    };\n    if (id) {\n      getUser();\n    } else {\n      setLoading(false);\n    }\n  }, [id]);\n  useEffect(() => {\n    if (usuario) {\n      setarStatesUsuario();\n    }\n  }, [usuario, setarStatesUsuario]);\n  const salvarUsuario = () => {\n    const saveUser = async () => {\n      var _nomeCompleto;\n      let nome = (_nomeCompleto = nomeCompleto) === null || _nomeCompleto === void 0 ? void 0 : _nomeCompleto.split(' ');\n      if (!nome) {\n        return;\n      }\n      const json = {\n        email: email,\n        username: username,\n        password: senha,\n        name: {\n          firstname: nome[0],\n          lastname: nome[1]\n        },\n        address: {\n          city: cidade,\n          street: rua,\n          number: numero,\n          zipcode: cep,\n          geolocation: {\n            lat: '',\n            long: ''\n          }\n        },\n        phone: telefone\n      };\n      if (id) {\n        axios.put(`http://localhost:5000/users/${id}`, json).then(r => {\n          console.log(r);\n          navigate('/usuarios');\n        }).catch(e => console.log(e));\n      } else {\n        axios.post('http://localhost:5000/users', json).then(r => {\n          console.log(r);\n          navigate(`/detalhes/${r.data.id}`);\n        }).catch(e => console.log(e));\n      }\n    };\n    saveUser();\n  };\n  const excluirUsuario = () => {\n    const deleteUser = async () => {\n      axios.delete(`https://fakestoreapi.com/users/${id}`).then(r => {\n        console.log(r);\n        setUsuario(undefined);\n        setarStatesUsuario();\n        navigate('/usuarios');\n      }).catch(e => console.log(e));\n    };\n    deleteUser();\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PreLoader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: stylesTema.voltar,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: stylesTema.voltar__texto,\n        onClick: () => navigate(-1),\n        children: '< Voltar'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"cadastrar\",\n        name: \"cadastrar\",\n        className: stylesTema.voltar__botao__salvar,\n        onClick: () => salvarUsuario(),\n        children: \"Salvar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"excluir\",\n        name: \"excluir\",\n        style: {\n          display: id ? 'block' : 'none'\n        },\n        className: stylesTema.voltar__botao__excluir,\n        onClick: () => excluirUsuario(),\n        children: \"Excluir\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: stylesTema.container,\n      children: [/*#__PURE__*/_jsxDEV(Geral, {\n        nomeCompleto: nomeCompleto,\n        setNomeCompleto: setNomeCompleto,\n        email: email,\n        setEmail: setEmail,\n        username: username,\n        setUsername: setUsername,\n        senha: senha,\n        setSenha: setSenha,\n        telefone: telefone,\n        setTelefone: setTelefone\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Endereco, {\n        cep: cep,\n        setCep: setCep,\n        rua: rua,\n        setRua: setRua,\n        numero: numero,\n        setNumero: setNumero,\n        cidade: cidade,\n        setCidade: setCidade\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n}\n_s(Detalhes, \"U6/HemVYyD9BiPrUbZ8n/mH+CDM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Detalhes;\nvar _c;\n$RefreshReg$(_c, \"Detalhes\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","stylesTema","useParams","useNavigate","axios","Geral","Endereco","PreLoader","Detalhes","loading","setLoading","id","usuario","setUsuario","navigate","email","setEmail","username","setUsername","telefone","setTelefone","setarStatesUsuario","phone","nomeComp","getUser","get","then","r","console","log","data","catch","e","salvarUsuario","saveUser","nome","nomeCompleto","split","json","password","senha","name","firstname","lastname","address","city","cidade","street","rua","number","numero","zipcode","cep","geolocation","lat","long","put","post","excluirUsuario","deleteUser","delete","undefined","voltar","voltar__texto","voltar__botao__salvar","display","voltar__botao__excluir","container","setNomeCompleto","setSenha","setCep","setRua","setNumero","setCidade"],"sources":["/home/weverton/projetos/crud-react-final/crud-react2/src/pages/Detalhes/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport stylesTema from 'styles/Tema.module.scss';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { IUser } from 'types/IUser';\nimport axios from 'axios';\nimport Geral from './Geral';\nimport Endereco from './Endereco';\nimport PreLoader from 'components/PreLoader';\n\nexport default function Detalhes() {\n  const [loading, setLoading] = useState<boolean>(true);\n\n  const { id } = useParams();\n  const [usuario, setUsuario] = useState<IUser>();\n  const navigate = useNavigate();\n\n  // remover o estado nomeCompleto\n  const [email, setEmail] = useState<string>('');\n  const [username, setUsername] = useState<string>('');\n  // remover o estado senha\n  const [telefone, setTelefone] = useState<string>('');\n\n\n  const setarStatesUsuario = useCallback(() => {\n    setEmail(usuario?.email ? usuario.email : '');\n    setUsername(usuario?.username ? usuario.username : '');\n    // remover a linha que seta a senha\n    setTelefone(usuario?.phone ? usuario.phone : '');\n\n    // mudar o nomeComp para usar o username\n    let nomeComp = usuario?.username;\n    setUsername(nomeComp);\n  }, [usuario]);\n\n  useEffect(() => {\n    const getUser = async () => {\n      axios.get<IUser>(`http://localhost:5000/users/${id}`)\n        .then(r => {\n          console.log(r);\n          setUsuario(r.data);\n          setLoading(false);\n        })\n        .catch(e => console.log(e))\n    };\n\n    if (id) {\n      getUser();\n    } else {\n      setLoading(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    if (usuario) {\n      setarStatesUsuario();\n    }\n  }, [usuario, setarStatesUsuario]);\n\n  const salvarUsuario = () => {\n    const saveUser = async () => {\n      let nome = nomeCompleto?.split(' ');\n\n      if (!nome) {\n        return;\n      }\n\n      const json = {\n        email: email,\n        username: username,\n        password: senha,\n        name: {\n          firstname: nome[0],\n          lastname: nome[1]\n        },\n        address: {\n          city: cidade,\n          street: rua,\n          number: numero,\n          zipcode: cep,\n          geolocation: {\n            lat: '',\n            long: ''\n          }\n        },\n        phone: telefone\n      };\n\n      if (id) {\n        axios.put(`http://localhost:5000/users/${id}`, json)\n          .then(r => {\n            console.log(r);\n\n            navigate('/usuarios');\n          })\n          .catch(e => console.log(e))\n      } else {\n        axios.post('http://localhost:5000/users', json)\n          .then(r => {\n            console.log(r);\n\n            navigate(`/detalhes/${r.data.id}`);\n          })\n          .catch(e => console.log(e))\n      }\n    };\n\n    saveUser();\n  };\n\n  const excluirUsuario = () => {\n    const deleteUser = async () => {\n      axios.delete<IUser>(`https://fakestoreapi.com/users/${id}`)\n        .then(r => {\n          console.log(r);\n\n          setUsuario(undefined);\n          setarStatesUsuario();\n          navigate('/usuarios');\n        })\n        .catch(e => console.log(e))\n    };\n\n    deleteUser();\n  };\n\n  if (loading) {\n    return (\n      <div>\n        <PreLoader />\n      </div>\n    );\n  }\n\n  return (\n    <section>\n      <div className={stylesTema.voltar}>\n        <h2\n          className={stylesTema.voltar__texto}\n          onClick={() => navigate(-1)}\n        >\n          {'< Voltar'}\n        </h2>\n        <button\n          type='button'\n          id='cadastrar'\n          name='cadastrar'\n          className={stylesTema.voltar__botao__salvar}\n          onClick={() => salvarUsuario()}\n        >\n          Salvar\n        </button>\n        <button\n          type='button'\n          id='excluir'\n          name='excluir'\n          style={{\n            display: id ? 'block' : 'none'\n          }}\n          className={stylesTema.voltar__botao__excluir}\n          onClick={() => excluirUsuario()}\n        >\n          Excluir\n        </button>\n      </div>\n      <div className={stylesTema.container}>\n        <Geral\n          nomeCompleto={nomeCompleto}\n          setNomeCompleto={setNomeCompleto}\n          email={email}\n          setEmail={setEmail}\n          username={username}\n          setUsername={setUsername}\n          senha={senha}\n          setSenha={setSenha}\n          telefone={telefone}\n          setTelefone={setTelefone}\n        />\n        <Endereco\n          cep={cep}\n          setCep={setCep}\n          rua={rua}\n          setRua={setRua}\n          numero={numero}\n          setNumero={setNumero}\n          cidade={cidade}\n          setCidade={setCidade}\n        />\n      </div>\n    </section>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}