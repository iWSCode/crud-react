{"ast":null,"code":"var _jsxFileName = \"/home/weverton/projetos/crud-react-final/crud-react2/src/pages/Detalhes/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport stylesTema from 'styles/Tema.module.scss';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Geral from './Geral';\nimport Endereco from './Endereco';\nimport PreLoader from 'components/PreLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Detalhes() {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const {\n    id\n  } = useParams();\n  const [usuario, setUsuario] = useState();\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [address, setAddress] = useState('');\n  const [phone, setPhone] = useState('');\n  const setarStatesUsuario = useCallback(() => {\n    setUsername(usuario !== null && usuario !== void 0 && usuario.username ? usuario.username : '');\n    setEmail(usuario !== null && usuario !== void 0 && usuario.email ? usuario.email : '');\n    setPhone(usuario !== null && usuario !== void 0 && usuario.phone ? usuario.phone : '');\n    setAddress(usuario !== null && usuario !== void 0 && usuario.address ? usuario.address : '');\n  }, [usuario]);\n  useEffect(() => {\n    const getUser = async () => {\n      axios.get(`http://localhost:5000/users/${id}`).then(r => {\n        console.log(r);\n        setUsuario(r.data);\n        setLoading(false);\n      }).catch(e => console.log(e));\n    };\n    if (id) {\n      getUser();\n    } else {\n      setLoading(false);\n    }\n  }, [id]);\n  useEffect(() => {\n    if (usuario) {\n      setarStatesUsuario();\n    }\n  }, [usuario, setarStatesUsuario]);\n  const salvarUsuario = () => {\n    const saveUser = async () => {\n      let nome = username === null || username === void 0 ? void 0 : username.split(' ');\n      if (!nome) {\n        return;\n      }\n      const json = {\n        email: email,\n        username: username,\n        address: address,\n        phone: phone\n      };\n      if (id) {\n        axios.put(`http://localhost:5000/users/${id}`, json).then(r => {\n          console.log(r);\n          navigate('/usuarios');\n        }).catch(e => console.log(e));\n      } else {\n        axios.post('http://localhost:5000/users', json).then(r => {\n          console.log(r);\n          navigate(`/detalhes/${r.data.id}`);\n        }).catch(e => console.log(e));\n      }\n    };\n    saveUser();\n  };\n  const excluirUsuario = () => {\n    const deleteUser = async () => {\n      axios.delete(`http://localhost:5000/users/${id}`).then(r => {\n        console.log(r);\n        setUsuario(undefined);\n        setarStatesUsuario();\n        navigate('/usuarios');\n      }).catch(e => console.log(e));\n    };\n    deleteUser();\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PreLoader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: stylesTema.voltar,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: stylesTema.voltar__texto,\n        onClick: () => navigate(-1),\n        children: '< Voltar'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"cadastrar\",\n        name: \"cadastrar\",\n        className: stylesTema.voltar__botao__salvar,\n        onClick: () => salvarUsuario(),\n        children: \"Salvar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"excluir\",\n        name: \"excluir\",\n        style: {\n          display: id ? 'block' : 'none'\n        },\n        className: stylesTema.voltar__botao__excluir,\n        onClick: () => excluirUsuario(),\n        children: \"Excluir\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: stylesTema.container,\n      children: [/*#__PURE__*/_jsxDEV(Geral, {\n        nomeCompleto: username,\n        setNomeCompleto: setUsername,\n        username: username,\n        setUsername: setUsername,\n        email: email,\n        setEmail: setEmail,\n        phone: phone,\n        setPhone: setPhone\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Endereco, {\n        address: address,\n        setAddress: setAddress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\n_s(Detalhes, \"OY8ItPnXLibdqROMPknZ+OeR0/0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Detalhes;\nvar _c;\n$RefreshReg$(_c, \"Detalhes\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","stylesTema","useParams","useNavigate","axios","Geral","Endereco","PreLoader","Detalhes","loading","setLoading","id","usuario","setUsuario","navigate","username","setUsername","email","setEmail","address","setAddress","phone","setPhone","setarStatesUsuario","getUser","get","then","r","console","log","data","catch","e","salvarUsuario","saveUser","nome","split","json","put","post","excluirUsuario","deleteUser","delete","undefined","voltar","voltar__texto","voltar__botao__salvar","display","voltar__botao__excluir","container"],"sources":["/home/weverton/projetos/crud-react-final/crud-react2/src/pages/Detalhes/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport stylesTema from 'styles/Tema.module.scss';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { IUser } from 'types/IUser';\nimport axios from 'axios';\nimport Geral from './Geral';\nimport Endereco from './Endereco';\nimport PreLoader from 'components/PreLoader';\n\nexport default function Detalhes() {\n  const [loading, setLoading] = useState<boolean>(true);\n\n  const { id } = useParams();\n  const [usuario, setUsuario] = useState<IUser>();\n  const navigate = useNavigate();\n\n  const [username, setUsername] = useState<string>('');\n  const [email, setEmail] = useState<string>('');\n\n  const [address, setAddress] = useState<string>('');\n\n  const [phone, setPhone] = useState<string>('');\n\n\n  const setarStatesUsuario = useCallback(() => {\n\n    setUsername(usuario?.username ? usuario.username : '');\n    setEmail(usuario?.email ? usuario.email : '');\n    setPhone(usuario?.phone ? usuario.phone : '');\n    setAddress(usuario?.address ? usuario.address : '');\n  }, [usuario]);\n\n  useEffect(() => {\n    const getUser = async () => {\n      axios.get<IUser>(`http://localhost:5000/users/${id}`)\n        .then(r => {\n          console.log(r);\n          setUsuario(r.data);\n          setLoading(false);\n        })\n        .catch(e => console.log(e))\n    };\n\n    if (id) {\n      getUser();\n    } else {\n      setLoading(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    if (usuario) {\n      setarStatesUsuario();\n    }\n  }, [usuario, setarStatesUsuario]);\n\n  const salvarUsuario = () => {\n    const saveUser = async () => {\n      let nome = username?.split(' ');\n\n      if (!nome) {\n        return;\n      }\n\n      const json = {\n        email: email,\n        username: username,\n        address: address,\n        phone: phone\n      };\n\n      if (id) {\n        axios.put(`http://localhost:5000/users/${id}`, json)\n          .then(r => {\n            console.log(r);\n\n            navigate('/usuarios');\n          })\n          .catch(e => console.log(e))\n      } else {\n        axios.post('http://localhost:5000/users', json)\n          .then(r => {\n            console.log(r);\n\n            navigate(`/detalhes/${r.data.id}`);\n          })\n          .catch(e => console.log(e))\n      }\n    };\n\n    saveUser();\n  };\n\n  const excluirUsuario = () => {\n    const deleteUser = async () => {\n      axios.delete<IUser>(`http://localhost:5000/users/${id}`)\n        .then(r => {\n          console.log(r);\n\n          setUsuario(undefined);\n          setarStatesUsuario();\n          navigate('/usuarios');\n        })\n        .catch(e => console.log(e))\n    };\n\n    deleteUser();\n  };\n\n  if (loading) {\n    return (\n      <div>\n        <PreLoader />\n      </div>\n    );\n  }\n\n  return (\n    <section>\n      <div className={stylesTema.voltar}>\n        <h2\n          className={stylesTema.voltar__texto}\n          onClick={() => navigate(-1)}\n        >\n          {'< Voltar'}\n        </h2>\n        <button\n          type='button'\n          id='cadastrar'\n          name='cadastrar'\n          className={stylesTema.voltar__botao__salvar}\n          onClick={() => salvarUsuario()}\n        >\n          Salvar\n        </button>\n        <button\n          type='button'\n          id='excluir'\n          name='excluir'\n          style={{\n            display: id ? 'block' : 'none'\n          }}\n          className={stylesTema.voltar__botao__excluir}\n          onClick={() => excluirUsuario()}\n        >\n          Excluir\n        </button>\n      </div>\n      <div className={stylesTema.container}>\n        <Geral\n          nomeCompleto={username}\n          setNomeCompleto={setUsername}\n          username={username}\n          setUsername={setUsername}\n          email={email}\n          setEmail={setEmail}\n          phone={phone}\n          setPhone={setPhone}\n        />\n        <Endereco\n          address={address}\n          setAddress={setAddress}\n        />\n      </div>\n    </section>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}