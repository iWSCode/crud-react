{"ast":null,"code":"var _jsxFileName = \"/home/weverton/projetos/crud-react-final/crud-react2/src/pages/Detalhes/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport stylesTema from 'styles/Tema.module.scss';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Geral from './Geral';\nimport Endereco from './Endereco';\nimport PreLoader from 'components/PreLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Detalhes() {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const {\n    id\n  } = useParams();\n  const [usuario, setUsuario] = useState();\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [address, setAddress] = useState('');\n\n  // remover o estado senha\n  const [phone, setTelefone] = useState('');\n  const setarStatesUsuario = useCallback(() => {\n    setEmail(usuario !== null && usuario !== void 0 && usuario.email ? usuario.email : '');\n    setUsername(usuario !== null && usuario !== void 0 && usuario.username ? usuario.username : '');\n    // remover a linha que seta a senha\n    setTelefone(usuario !== null && usuario !== void 0 && usuario.phone ? usuario.phone : '');\n\n    // mudar o nomeComp para usar o username\n    let nomeComp = usuario === null || usuario === void 0 ? void 0 : usuario.username;\n    setUsername(nomeComp);\n  }, [usuario]);\n  useEffect(() => {\n    const getUser = async () => {\n      axios.get(`http://localhost:5000/users/${id}`).then(r => {\n        console.log(r);\n        setUsuario(r.data);\n        setLoading(false);\n      }).catch(e => console.log(e));\n    };\n    if (id) {\n      getUser();\n    } else {\n      setLoading(false);\n    }\n  }, [id]);\n  useEffect(() => {\n    if (usuario) {\n      setarStatesUsuario();\n    }\n  }, [usuario, setarStatesUsuario]);\n  const salvarUsuario = () => {\n    const saveUser = async () => {\n      var _nomeCompleto;\n      let nome = (_nomeCompleto = nomeCompleto) === null || _nomeCompleto === void 0 ? void 0 : _nomeCompleto.split(' ');\n      if (!nome) {\n        return;\n      }\n      const json = {\n        email: email,\n        username: username,\n        password: senha,\n        name: {\n          firstname: nome[0],\n          lastname: nome[1]\n        },\n        address: {\n          city: cidade,\n          street: rua,\n          number: numero,\n          zipcode: cep,\n          geolocation: {\n            lat: '',\n            long: ''\n          }\n        },\n        phone: telefone\n      };\n      if (id) {\n        axios.put(`http://localhost:5000/users/${id}`, json).then(r => {\n          console.log(r);\n          navigate('/usuarios');\n        }).catch(e => console.log(e));\n      } else {\n        axios.post('http://localhost:5000/users', json).then(r => {\n          console.log(r);\n          navigate(`/detalhes/${r.data.id}`);\n        }).catch(e => console.log(e));\n      }\n    };\n    saveUser();\n  };\n  const excluirUsuario = () => {\n    const deleteUser = async () => {\n      axios.delete(`https://fakestoreapi.com/users/${id}`).then(r => {\n        console.log(r);\n        setUsuario(undefined);\n        setarStatesUsuario();\n        navigate('/usuarios');\n      }).catch(e => console.log(e));\n    };\n    deleteUser();\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PreLoader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: stylesTema.voltar,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: stylesTema.voltar__texto,\n        onClick: () => navigate(-1),\n        children: '< Voltar'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"cadastrar\",\n        name: \"cadastrar\",\n        className: stylesTema.voltar__botao__salvar,\n        onClick: () => salvarUsuario(),\n        children: \"Salvar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"excluir\",\n        name: \"excluir\",\n        style: {\n          display: id ? 'block' : 'none'\n        },\n        className: stylesTema.voltar__botao__excluir,\n        onClick: () => excluirUsuario(),\n        children: \"Excluir\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: stylesTema.container,\n      children: [/*#__PURE__*/_jsxDEV(Geral, {\n        nomeCompleto: nomeCompleto,\n        setNomeCompleto: setNomeCompleto,\n        email: email,\n        setEmail: setEmail,\n        username: username,\n        setUsername: setUsername,\n        senha: senha,\n        setSenha: setSenha,\n        telefone: telefone,\n        setTelefone: setTelefone\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Endereco, {\n        cep: cep,\n        setCep: setCep,\n        rua: rua,\n        setRua: setRua,\n        numero: numero,\n        setNumero: setNumero,\n        cidade: cidade,\n        setCidade: setCidade\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n_s(Detalhes, \"lwBwGXyvBK6GEZl5StAJCJGqDzc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Detalhes;\nvar _c;\n$RefreshReg$(_c, \"Detalhes\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","stylesTema","useParams","useNavigate","axios","Geral","Endereco","PreLoader","Detalhes","loading","setLoading","id","usuario","setUsuario","navigate","username","setUsername","email","setEmail","address","setAddress","phone","setTelefone","setarStatesUsuario","nomeComp","getUser","get","then","r","console","log","data","catch","e","salvarUsuario","saveUser","nome","nomeCompleto","split","json","password","senha","name","firstname","lastname","city","cidade","street","rua","number","numero","zipcode","cep","geolocation","lat","long","telefone","put","post","excluirUsuario","deleteUser","delete","undefined","voltar","voltar__texto","voltar__botao__salvar","display","voltar__botao__excluir","container","setNomeCompleto","setSenha","setCep","setRua","setNumero","setCidade"],"sources":["/home/weverton/projetos/crud-react-final/crud-react2/src/pages/Detalhes/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport stylesTema from 'styles/Tema.module.scss';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { IUser } from 'types/IUser';\nimport axios from 'axios';\nimport Geral from './Geral';\nimport Endereco from './Endereco';\nimport PreLoader from 'components/PreLoader';\n\nexport default function Detalhes() {\n  const [loading, setLoading] = useState<boolean>(true);\n\n  const { id } = useParams();\n  const [usuario, setUsuario] = useState<IUser>();\n  const navigate = useNavigate();\n\n  const [username, setUsername] = useState<string>('');\n  const [email, setEmail] = useState<string>('');\n\n  const [address, setAddress] = useState<string>('');\n\n  // remover o estado senha\n  const [phone, setTelefone] = useState<string>('');\n\n\n  const setarStatesUsuario = useCallback(() => {\n    setEmail(usuario?.email ? usuario.email : '');\n    setUsername(usuario?.username ? usuario.username : '');\n    // remover a linha que seta a senha\n    setTelefone(usuario?.phone ? usuario.phone : '');\n\n    // mudar o nomeComp para usar o username\n    let nomeComp = usuario?.username;\n    setUsername(nomeComp);\n  }, [usuario]);\n\n  useEffect(() => {\n    const getUser = async () => {\n      axios.get<IUser>(`http://localhost:5000/users/${id}`)\n        .then(r => {\n          console.log(r);\n          setUsuario(r.data);\n          setLoading(false);\n        })\n        .catch(e => console.log(e))\n    };\n\n    if (id) {\n      getUser();\n    } else {\n      setLoading(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    if (usuario) {\n      setarStatesUsuario();\n    }\n  }, [usuario, setarStatesUsuario]);\n\n  const salvarUsuario = () => {\n    const saveUser = async () => {\n      let nome = nomeCompleto?.split(' ');\n\n      if (!nome) {\n        return;\n      }\n\n      const json = {\n        email: email,\n        username: username,\n        password: senha,\n        name: {\n          firstname: nome[0],\n          lastname: nome[1]\n        },\n        address: {\n          city: cidade,\n          street: rua,\n          number: numero,\n          zipcode: cep,\n          geolocation: {\n            lat: '',\n            long: ''\n          }\n        },\n        phone: telefone\n      };\n\n      if (id) {\n        axios.put(`http://localhost:5000/users/${id}`, json)\n          .then(r => {\n            console.log(r);\n\n            navigate('/usuarios');\n          })\n          .catch(e => console.log(e))\n      } else {\n        axios.post('http://localhost:5000/users', json)\n          .then(r => {\n            console.log(r);\n\n            navigate(`/detalhes/${r.data.id}`);\n          })\n          .catch(e => console.log(e))\n      }\n    };\n\n    saveUser();\n  };\n\n  const excluirUsuario = () => {\n    const deleteUser = async () => {\n      axios.delete<IUser>(`https://fakestoreapi.com/users/${id}`)\n        .then(r => {\n          console.log(r);\n\n          setUsuario(undefined);\n          setarStatesUsuario();\n          navigate('/usuarios');\n        })\n        .catch(e => console.log(e))\n    };\n\n    deleteUser();\n  };\n\n  if (loading) {\n    return (\n      <div>\n        <PreLoader />\n      </div>\n    );\n  }\n\n  return (\n    <section>\n      <div className={stylesTema.voltar}>\n        <h2\n          className={stylesTema.voltar__texto}\n          onClick={() => navigate(-1)}\n        >\n          {'< Voltar'}\n        </h2>\n        <button\n          type='button'\n          id='cadastrar'\n          name='cadastrar'\n          className={stylesTema.voltar__botao__salvar}\n          onClick={() => salvarUsuario()}\n        >\n          Salvar\n        </button>\n        <button\n          type='button'\n          id='excluir'\n          name='excluir'\n          style={{\n            display: id ? 'block' : 'none'\n          }}\n          className={stylesTema.voltar__botao__excluir}\n          onClick={() => excluirUsuario()}\n        >\n          Excluir\n        </button>\n      </div>\n      <div className={stylesTema.container}>\n        <Geral\n          nomeCompleto={nomeCompleto}\n          setNomeCompleto={setNomeCompleto}\n          email={email}\n          setEmail={setEmail}\n          username={username}\n          setUsername={setUsername}\n          senha={senha}\n          setSenha={setSenha}\n          telefone={telefone}\n          setTelefone={setTelefone}\n        />\n        <Endereco\n          cep={cep}\n          setCep={setCep}\n          rua={rua}\n          setRua={setRua}\n          numero={numero}\n          setNumero={setNumero}\n          cidade={cidade}\n          setCidade={setCidade}\n        />\n      </div>\n    </section>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}